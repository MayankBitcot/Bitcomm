"""Configuration module for voice package"""
from typing import Any, Dict

from .config import ConfigService


class RealtimeConfig:
    """Simple config - just set properties"""

    Voice = None
    Model = None
    TurnDetectionMode = None
    TranscriptionModel = None
    NoiseReductionMode = None
    MaxOutputTokens = None
    Prompt = None  # Set to string to override entire prompt
    PromptAppend = None  # Append text to existing prompt
    PromptPrepend = None  # Prepend text to existing prompt

    @classmethod
    def to_dict(cls) -> Dict[str, Any]:
        """Convert to dict for voice_gateway"""
        d = {}
        if cls.Voice:
            d["voice"] = cls.Voice
        if cls.Model:
            d["voice_model"] = cls.Model
        if cls.TurnDetectionMode:
            d["turn_detection_mode"] = cls.TurnDetectionMode
        if cls.TranscriptionModel:
            d["transcription_model"] = cls.TranscriptionModel
        if cls.NoiseReductionMode:
            d["noise_reduction_mode"] = cls.NoiseReductionMode
        if cls.MaxOutputTokens:
            d["max_output_tokens"] = cls.MaxOutputTokens

        # Handle prompt modifications
        if cls.Prompt or cls.PromptAppend or cls.PromptPrepend:
            instructions = {}
            if cls.Prompt:
                instructions["override"] = cls.Prompt
            if cls.PromptPrepend:
                instructions["prepend"] = cls.PromptPrepend
            if cls.PromptAppend:
                instructions["append"] = cls.PromptAppend
            d["instructions"] = instructions

        return d


__all__ = ["ConfigService", "RealtimeConfig"]
