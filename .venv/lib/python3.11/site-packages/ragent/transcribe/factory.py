"""Factory for creating transcriber instances."""

from ragent.transcribe.base import BaseTranscriber
from ragent.transcribe.openai import WhisperTranscriber
from ragent.transcribe.providers import TranscriberProviders


class TranscriberFactory:
    """
    Factory class for creating transcriber instances.

    Usage:
        from ragent.transcribe import TranscriberFactory, TranscriberProviders

        # Create OpenAI Whisper transcriber
        transcriber = TranscriberFactory.get_transcriber(TranscriberProviders.OPENAI)

        # Or import directly
        from ragent.transcribe.openai import WhisperTranscriber
        transcriber = WhisperTranscriber()
    """

    @staticmethod
    def get_transcriber(provider: TranscriberProviders, **kwargs) -> BaseTranscriber:
        """
        Get a transcriber instance for the specified provider.

        Args:
            provider: The transcription provider to use
            **kwargs: Additional arguments to pass to the transcriber constructor

        Returns:
            An instance of the specified transcriber

        Raises:
            ValueError: If the provider is not supported
        """
        if provider == TranscriberProviders.OPENAI:
            return WhisperTranscriber(**kwargs)
        # Future providers can be added here:
        # elif provider == TranscriberProviders.GEMINI:
        #     from ragent.transcribe.gemini import GeminiTranscriber
        #     return GeminiTranscriber(**kwargs)
        # elif provider == TranscriberProviders.AZURE:
        #     from ragent.transcribe.azure import AzureTranscriber
        #     return AzureTranscriber(**kwargs)
        else:
            raise ValueError(
                f"Unsupported provider: {provider}. "
                f"Available: {TranscriberProviders.values()}"
            )
